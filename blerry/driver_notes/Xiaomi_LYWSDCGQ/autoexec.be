import json
var fake_print_time = tasmota.millis(5000)
fake_packet_options = [
  '020106131695FE5020AA0167AE7133342D58061002B901',
  '020106151695FE5020AA0169AE7133342D580D1004FC00BF01',
  '020106151695FE5020AA0172AE7133342D580D1004FD00B801',
  '020106151695FE5020AA0176AE7133342D580D1004FC00B801',
  '020106151695FE5020AA0179AE7133342D580D1004FD00B901',
  '020106151695FE5020AA017AAE7133342D580D1004FB00BA01',
  '020106131695FE5020AA017CAE7133342D58061002BC01',
  '020106151695FE5020AA017EAE7133342D580D1004FD00BA01',
  '020106151695FE5020AA0180AE7133342D580D1004FC00B701',
  '020106151695FE5020AA0183AE7133342D580D1004FC00B601',
  '020106151695FE5020AA0188AE7133342D580D1004FC00B701',
  '020106151695FE5020AA018AAE7133342D580D1004FC00B601',
  '020106151695FE5020AA018EAE7133342D580D1004FC00B601',
  '020106151695FE5020AA0190AE7133342D580D1004FB00B601',
  '020106131695FE5020AA0192AE7133342D58061002B601',
  '020106151695FE5020AA0194AE7133342D580D1004FB00B901',
  '020106151695FE5020AA0196AE7133342D580D1004FB00BD01',
  '020106151695FE5020AA0198AE7133342D580D1004FC00BD01',
  '020106151695FE5020AA0199AE7133342D580D1004FB00BD01',
  '020106151695FE5020AA019BAE7133342D580D1004FC00BD01',
  '020106151695FE5020AA019FAE7133342D580D1004FB00BC01',
  '020106121695FE5020AA01A0AE7133342D580A100164',
  '020106131695FE5020AA01A2AE7133342D58041002FC00',
  '020106131695FE5020AA01A7AE7133342D58061002BD01',
  '020106151695FE5020AA01A9AE7133342D580D1004FB00BC01',
  '020106151695FE5020AA01ADAE7133342D580D1004FB00C301',
  '020106121695FE5020AA01AFAE7133342D580A100164',
  '020106151695FE5020AA01B0AE7133342D580D1004FC00BE01',
  '020106131695FE5020AA01B2AE7133342D58061002BB01',
  '020106151695FE5020AA01B4AE7133342D580D1004FB00BA01',
  '020106151695FE5020AA01B6AE7133342D580D1004FC00BD01',
  '020106151695FE5020AA01B8AE7133342D580D1004FB00BD01',
  '020106151695FE5020AA01BAAE7133342D580D1004FA00BE01',
  '020106151695FE5020AA01C0AE7133342D580D1004FC00BC01',
  '020106151695FE5020AA01C4AE7133342D580D1004FB00BF01',
  '020106151695FE5020AA01C6AE7133342D580D1004FC00C101',
  '020106151695FE5020AA01CAAE7133342D580D1004FC00BE01',
  '020106131695FE5020AA01CCAE7133342D58041002FB00',
  '020106151695FE5020AA01CEAE7133342D580D1004FB00BE01',
  '020106151695FE5020AA01D4AE7133342D580D1004FC00B801',
  '020106151695FE5020AA01D6AE7133342D580D1004FC00B501',
  '020106151695FE5020AA01D8AE7133342D580D1004FB00B601',
  '020106121695FE5020AA01DCAE7133342D580A100164',
  '020106151695FE5020AA01E3AE7133342D580D1004FB00B601',
  '020106151695FE5020AA01EAAE7133342D580D1004FB00B601',
  '020106151695FE5020AA01EEAE7133342D580D1004FC00B501'
]

fake_ble = Driver()
var fake_idx = 0
fake_ble.every_second = def ()
  if tasmota.millis() > fake_print_time
    var msg = {'DetailsBLE': {}}
    msg['DetailsBLE']['mac'] = '582D343371AE'
    msg['DetailsBLE']['a'] = 'dev_Xiaomi_LYWSDCGQ'
    msg['DetailsBLE']['RSSI'] = -1
    fake_idx = (fake_idx + 1) % size(fake_packet_options)
    msg['DetailsBLE']['p'] = fake_packet_options[fake_idx]
    tasmota.publish_result(json.dump(msg), 'BLY')
    fake_print_time = tasmota.millis(5000)
  end
end
tasmota.add_driver(fake_ble)
